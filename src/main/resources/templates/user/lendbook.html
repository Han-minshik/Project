<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
<head>
	<meta charset="UTF-8">
	<title>내가 얼마나 대여를 했을까요?</title>
	<link rel="stylesheet" href="../../static/css/content/lendbook.css" type="text/css">
</head>
<body>
<h1>나의 대여 목록</h1>
<header>
	<div>
		<span>대여한 권수:</span>
		<b th:text="${pageInfo.getTotalElementCount()} + '건'">13건</b>
	</div>

	<li>
		<a th:href="@{/lendbook(size=${pageInfo.size},sort='recent')}">최신순</a>
	</li>
	<li>
		<a th:href="@{/lendbook(size=${pageInfo.size},sort='name')}">이름순</a>
	</li>
	<li>
		<a th:href="@{/lendbook(size=${pageInfo.size},sort='low-price')}">대여기간</a>
	</li>

	<li>
		<label>
			<span>보기설정</span>
			<select id="view-size-select">
				<option value="10" th:selected="${pageInfo.size == 10}">10개</option>
				<option value="25" th:selected="${pageInfo.size == 25}">25개</option>
				<option value="30" th:selected="${pageInfo.size == 30}">30개</option>
				<option value="50" th:selected="${pageInfo.size == 50}">50개</option>
			</select>
		</label>
	</li>

</header>

<hr/>

<main>
	<div class="wishlist" id="wishlist-container">
		<div th:if="${loanBookMap.isEmpty()}">
			<p>대여한 책이 없어요ㅠㅠ</p>
			<a href="../book/book-category" class="link">책 보러가기!</a>
		</div>
		<div th:if="${!loanBookMap.isEmpty()}">
			<ul>
				<li th:each="entry : ${loanBookMap}">
					<div class="book-item">
						<!-- Book Image -->
						<img th:src="${entry.value.getBase64Image()}" alt="Book Cover" class="book-cover" />

						<!-- Book Title and Author -->
						<div class="book-details">
							<h3 th:text="${entry.value.getTitle()}">Book Title</h3>
							<p th:text="${entry.value.getAuthor()}">Author</p>
						</div>

						<!-- Loan Return Date -->
						<div class="loan-info">
							<p th:text="'반납 예정일: ' + ${#temporals.format(entry.key.getReturnDate(), 'yyyy-MM-dd')}">
								반납 예정일
							</p>
						</div>
					</div>
				</li>
			</ul>
		</div>
	</div>

</main>

<ol th:if="${pageInfo.page <= pageInfo.totalPageCount}">
	<li th:if="${pageInfo.startPage != 1}">
		<a th:href="@{/lendbook(
                    page=${pageInfo.startPage - 1},
                    size=${pageInfo.size},
                    sort=${pageInfo.sort}
                )}">
			<i class="bi bi-caret-left-fill"></i>
		</a>
	</li>

	<li th:if="${pageInfo.startPage <= pageInfo.endPage}" th:each="pageNumber: ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
		<a th:href="@{/lendbook(
                    page=${pageNumber},
                    size=${pageInfo.size},
                    sort=${pageInfo.sort})}"
		   th:text="${pageNumber}"
		   th:active="${pageInfo.page == pageNumber}">1</a>
	</li>
	<li th:if="${pageInfo.endPage != pageInfo.totalPageCount}">
		<a th:href="@{/product(
                    categoryNo=${pageInfo.categoryNo},
                    page=${pageInfo.endPage + 1},
                    size=${pageInfo.size},
                    sort=${pageInfo.sort}
                )}">
			<i class="bi bi-caret-right-fill"></i>
		</a>
	</li>
</ol>

</body>
</html>